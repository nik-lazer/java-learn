Реализовано
1) Обработка двойного добавления (UOW)
2) Обработка обновления тем же самым (UOW)
3) Охват нескольких сущностей (Transaction)
4) Отслеживание файлов (Transaction)

Недостатки
1) Введено только явное управление транзакциями, что приводит к необходимости указывать транзакцию при записывающих операциях, а также отсутствию контроля
за тем чтобы клиент не завер несколько транзакций сразу. Решить можно введением пула коннектов к сервису с транзакциями, однако это в некотором смысле выходит
за рамки конкретной узкой задачи
3) Несколько последовательных обновлений в транзакции принципе можно свести к мерджингу полей с одним последующим обновлением хранилища. В принципе для этого
нужно усложнить проверку режима обновления